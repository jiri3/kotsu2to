---
category: tech
date: 2020-08-30T10:26:51.432Z
updatedate: 2020-08-30T10:26:51.432Z
title: '[Vercel] Serverless Functions ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§é–‹ç™ºã™ã‚‹'
description: Vercel ã® Serverless Functions ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§é–‹ç™ºã™ã‚‹æ‰‹é †ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚
tags:
  - Vercel
---
Vercel ã«ã¯ã€Serverless Functions ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§é–‹ç™ºã™ã‚‹ä»•çµ„ã¿ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚  
Vercel ã¯ã€1 æ—¥ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹å›æ•°ã®åˆ¶é™ãªã©[^1]ãŒã‚ã‚‹ã®ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§é–‹ç™ºã§ãã‚‹ã¨ä½•ã‹ã¨ä¾¿åˆ©ã§ã™ã€‚

ä»¥ä¸‹ã€ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§é–‹ç™ºã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚  
å‰ææ¡ä»¶ã¯ã€Vercel ã«ã¦ãƒ‡ãƒ—ãƒ­ã‚¤æ¸ˆã¿ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒã‚ã‚‹ã“ã¨ã§ã™ã€‚  
Vercelã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã«ã¤ã„ã¦ã¯ã€[ã“ã¡ã‚‰ã®è¨˜äº‹](/tech/2020-08-27-vercel-serverless-functions-web-api-ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹/)ã§ç´¹ä»‹ã—ã¦ã„ã¾ã™ã®ã§ã€ã”å‚è€ƒã«ã—ã¦ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚

#### Vercel CLI ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹

[Vercel CLI](https://vercel.com/docs/cli#introduction)ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚  
æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚

```bash
$ npm i -g vercel
```

#### Project Linking

ã¾ãšã€ãƒ‡ãƒ—ãƒ­ã‚¤æ¸ˆã¿ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ Git ã§ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¦ãã¾ã™ã€‚  
ã™ã§ã«ãƒ­ãƒ¼ã‚«ãƒ«ã«å­˜åœ¨ã—ã¦ã„ã‚‹å ´åˆã€ã“ã®æ“ä½œã¯ä¸è¦ã§ã™ã€‚

æ¬¡ã«ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¦ vercel ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚  
ã“ã“ã§ã€Vercel ã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ãªã„å ´åˆã¯ã€ã¾ãšãƒ­ã‚°ã‚¤ãƒ³ã‚’æ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚  
ãã®å ´åˆã¯ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ä¸‹ã•ã„ã€‚å…¥åŠ›ã™ã‚‹ã¨ Vercel ã‹ã‚‰ç¢ºèªãƒ¡ãƒ¼ãƒ«ãŒå±Šãã¾ã™ã€‚  
ãã—ã¦ã€ãã®ãƒ¡ãƒ¼ãƒ«ä¸­ã«ã‚ã‚‹ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚³ãƒ¼ãƒ‰ã¨ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ãŒä¸€è‡´ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ã€ãƒ¡ãƒ¼ãƒ«ä¸­ã® Verify ãƒœã‚¿ãƒ³ã‚’æŠ¼ä¸‹ã—ã¦ãã ã•ã„ã€‚  
ã“ã‚Œã§ãƒ­ã‚°ã‚¤ãƒ³ãŒå®Œäº†ã—ã¾ã™ã€‚

ãã‚Œã‹ã‚‰å†åº¦ã€vercel ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ä¸‹ã•ã„ã€‚ã™ã‚‹ã¨ Project Linking[^2]ã¨ã„ã†å‡¦ç†ãŒå§‹ã¾ã‚Šã¾ã™ã€‚  
Project Linking ã¨ã¯ã€Vercelï¼ˆãƒªãƒ¢ãƒ¼ãƒˆï¼‰ä¸Šã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã¨ã‚’ç´ä»˜ã‘ã‚‹å‡¦ç†ã§ã™ã€‚
å¯¾è©±å½¢å¼ã§ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯å‡¦ç†ã•ã‚Œã¦ã„ãã¾ã™ã€‚

ä¸‹è¨˜ã«ã“ã“ã¾ã§ã®ã‚³ãƒãƒ³ãƒ‰ã®æµã‚Œã‚’ç¤ºã—ã¾ã™ã€‚

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã™ã‚‹
$ cd `ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª`

# ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ãªã„å ´åˆã¯ãƒ­ã‚°ã‚¤ãƒ³ã‚’æ±‚ã‚ã‚‰ã‚Œã¾ã™
# ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ã®å ´åˆã¯ã“ã®å‡¦ç†ã¯ã‚ã‚Šã¾ã›ã‚“
$ vercel
    Vercel CLI 20.1.0
# Vercelã«ç™»éŒ²ã—ãŸãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¾ã™
    > No existing credentials found. Please log in:
    We sent an email to `Vercelã«ç™»éŒ²ã—ãŸãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹`.
    Please follow the steps provided inside it and make sure the
    security code matches `ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¼ã‚³ãƒ¼ãƒ‰`.
    âœ” Email confirmed
    Congratulations! You are now logged in. In order to deploy something, run `vercel`.
    ğŸ’¡  Connect your Git Repositories to deploy every branch push automatically (https://vercel.link/git).
$ vercel
    Vercel CLI 20.1.0
# ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã®ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ‘ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã®ã§ã€
# é–“é•ã„ãŒãªã‘ã‚Œã°ã€Œyã€ã‚’å…¥åŠ›ã—ã¾ã™
    ? Set up and deploy `ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã®ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ‘ã‚¹`? [Y/n] y
# Vercelã«ç™»éŒ²ã—ãŸåå‰ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ã¯åˆ¥ã§è¨­å®šã—ãŸæ–¹ï¼‰ã‚’å…¥åŠ›ã—ã¾ã™
# å€™è£œãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã®ã§ã€é¸æŠã™ã‚‹ã ã‘ã§å¤§ä¸ˆå¤«ã§ã™
    ? Which scope do you want to deploy to? `åå‰ï¼ˆãƒ•ãƒ«ãƒãƒ¼ãƒ ã®æ–¹ï¼‰`
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã®å€™è£œãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã®ã§ã€é–“é•ã„ãŒãªã‘ã‚Œã°ã€Œyã€ã‚’å…¥åŠ›ã—ã¾ã™
# ã¡ãªã¿ã«ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã¯æ¬¡ã®ã‚ˆã†ã«
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®URLã®ä¸€éƒ¨ã¨ãªã£ã¦ã„ã¾ã™ã€‚
#ã€Œhttps://vercel.com/{ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå}ã€
    ? Found project `ã‚ãªãŸã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå`. Link to it? [Y/n] y
    ğŸ”—  Linked to `ã‚ãªãŸã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå` (created .vercel and added it to .gitignore)
# ä¸‹è¨˜ã‚¨ãƒ©ãƒ¼ã®åŸå› ã¯ã‚ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸãŒã€
# Project Linkingã¯å•é¡Œãªãã§ãã¦ã„ã¾ã—ãŸã€‚
    Error! Invalid vercel.json - `projectSettings.sourceFilesOutsideRootDirectory` Invalid request: `projectSettings.sourceFilesOutsideRootDirectory` should be boolean..
    View Documentation: https://vercel.com/docs/configuration#project/projectsettings.sourcefilesoutsiderootdirectory
```

ã¡ãªã¿ã«ã€Project Linking ãŒçµ‚ã‚ã‚‹ã¨ã€`.vercel`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚  
ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸­ã«ãƒªãƒ³ã‚¯ã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® ID æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚  
ã¾ãŸã€vercel ã‚³ãƒãƒ³ãƒ‰ã§ Project Linking ãŒè¡Œã‚ã‚Œã‚‹ã®ã¯åˆå›ã®ã¿ã§ã™ã€‚  
ä»¥é™ã¯ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹å‡¦ç†ãŒèµ°ã‚Šã¾ã™ã€‚

##### vercel dev ã‚³ãƒãƒ³ãƒ‰

ä»¥ä¸Šã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã®æ§‹ç¯‰ã¯å®Œäº†ã—ã¾ã—ãŸã€‚  
ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«ä»»æ„ã®ä¿®æ­£ã‚’åŠ ãˆãŸã‚‰ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```bash
$ vercel dev
    Vercel CLI 20.1.0 dev (beta) â€” https://vercel.com/feedback
    > Ready! Available at http://localhost:3000
```

`$ vercel dev `ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãƒ­ãƒ¼ã‚«ãƒ«ãƒ›ã‚¹ãƒˆã§ Serverless Functions ãŒå‹•ä½œã—ã¾ã™ã€‚  
Serverless Functions ã¯ã€  
 `http://localhost:3000/api/{ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆæ‹¡å¼µå­ã¯é™¤ãï¼‰}`   
ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚  
ãƒ›ãƒƒãƒˆãƒ‡ãƒ—ãƒ­ã‚¤ãŒåŠ¹ã„ã¦ã„ã‚‹ã®ã§ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å†åº¦ä¿®æ­£ã—ã¦ã‚‚`$ vercel dev`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

---

ä»Šå›ã¯ã€Vercel ã®ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã®æ§‹ç¯‰ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã—ãŸã€‚  
[Vercel CLI](https://vercel.com/docs/cli#introduction/vercel-cli-reference)ã¯ä»–ã«ã‚‚æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã®ã§ã€æ˜¯éç¢ºèªã—ã¦ã¿ã¦ãã ã•ã„ã€‚

[^1]: [Limits](https://vercel.com/docs/platform/limits)

[^2]: [Project Linking](https://vercel.com/docs/cli#commands/overview/project-linking)
